import{d as L,r as l,c as d,o as u,a as i,w as v,v as p,b as _,e as q,t as x,u as k,f as $,g as U,s as c,_ as A,h as I,i as V,j as C,k as N,l as O}from"./index-MGTNwt98.js";const B={class:"emailAndPwd"},W=["required"],T=["required"],D=["required"],M=["required"],j=["required"],z={key:0,class:"error-text"},F=L({__name:"EmailPwdLogin",emits:["loginStart","loginEnd"],setup(E,{emit:s}){const a=k(),m=l(null),o=l(null),r=l(null),f=l(null),y=l(null),w=l(null),b=s;async function P(){if(r.value&&f.value&&o.value){b("loginStart");const n=await $(a,r.value,f.value);U(n.user,{displayName:o.value}),b("loginEnd")}}async function S(){if(y.value&&w.value)try{await c(a,y.value,w.value),m.value=null}catch{m.value="Credenziali errate"}}function g(){const n=window.navigator.userAgent,e=/^((?!chrome|android).)*safari/i.test(n),t=/CriOS/.test(n)&&/iPhone|iPad|iPod/.test(n);return e||t}return(n,e)=>(u(),d("div",B,[i("form",{onSubmit:_(P,["prevent"])},[v(i("md-outlined-text-field",{required:!g(),label:"Nome e cognome",type:"text",onChange:e[0]||(e[0]=t=>{t.target.reportValidity()}),"onUpdate:modelValue":e[1]||(e[1]=t=>o.value=t)},null,40,W),[[p,o.value]]),v(i("md-outlined-text-field",{required:!g(),label:"Email",type:"email",onChange:e[2]||(e[2]=t=>{t.target.reportValidity()}),"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t)},null,40,T),[[p,r.value]]),v(i("md-outlined-text-field",{required:!g(),label:"Password",type:"password",onChange:e[4]||(e[4]=t=>{t.target.reportValidity()}),"onUpdate:modelValue":e[5]||(e[5]=t=>f.value=t)},null,40,D),[[p,f.value]]),e[10]||(e[10]=i("md-filled-button",{type:"submit"}," Registrati ",-1))],32),e[12]||(e[12]=i("div",{class:"line"},null,-1)),i("form",{onSubmit:_(S,["prevent"])},[v(i("md-outlined-text-field",{label:"Email",type:"text",onChange:e[6]||(e[6]=t=>{t.target.reportValidity()}),"onUpdate:modelValue":e[7]||(e[7]=t=>y.value=t),required:!g()},null,40,M),[[p,y.value]]),v(i("md-outlined-text-field",{label:"Password",type:"password",onChange:e[8]||(e[8]=t=>{t.target.reportValidity()}),"onUpdate:modelValue":e[9]||(e[9]=t=>w.value=t),required:!g()},null,40,j),[[p,w.value]]),e[11]||(e[11]=i("md-filled-button",{type:"submit"}," Login ",-1)),m.value?(u(),d("div",z,x(m.value),1)):q("",!0)],32)]))}}),R=A(F,[["__scopeId","data-v-0a5456ca"]]),h={class:"login"},G={key:0,indeterminate:""},H={key:1,class:"toBeLogged"},J={key:2,class:"loggedIn"},Q=L({__name:"LoginView",setup(E){const s=I(),a=l(!1);return(m,o)=>(u(),d("div",h,[!V(s)&&a.value?(u(),d("md-circular-progress",G)):V(s)?(u(),d("div",J," Loggato con "+x(V(s).email)+" "+x(V(s).getIdToken()),1)):(u(),d("div",H,[C(R,{class:"emailLogin",onLogin:o[0]||(o[0]=r=>a.value=!0)}),o[2]||(o[2]=N(" o ",-1)),C(O,{class:"googleLogin",onLoginStart:o[1]||(o[1]=r=>a.value=!0)})]))]))}});export{Q as default};
